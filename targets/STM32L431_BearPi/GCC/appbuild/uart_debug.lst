ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"uart_debug.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.data.s_pUSART,"aw",%progbits
  18              		.align	2
  21              	s_pUSART:
  22 0000 00380140 		.word	1073821696
  23              		.section	.data.s_uwIRQn,"aw",%progbits
  24              		.align	2
  27              	s_uwIRQn:
  28 0000 25000000 		.word	37
  29              		.section	.bss.s_uart_init,"aw",%nobits
  30              		.align	2
  33              	s_uart_init:
  34 0000 00000000 		.space	4
  35              		.comm	uart_debug,120,4
  36              		.section	.bss.s_uartdebug_rcv_ring,"aw",%nobits
  37              		.align	2
  40              	s_uartdebug_rcv_ring:
  41 0000 00000000 		.space	16
  41      00000000 
  41      00000000 
  41      00000000 
  42              		.section	.bss.s_uartdebug_rcv_ringmem,"aw",%nobits
  43              		.align	2
  46              	s_uartdebug_rcv_ringmem:
  47 0000 00000000 		.space	128
  47      00000000 
  47      00000000 
  47      00000000 
  47      00000000 
  48              		.section	.bss.s_uartdebug_rcv_sync,"aw",%nobits
  49              		.align	2
  52              	s_uartdebug_rcv_sync:
  53 0000 00000000 		.space	4
  54              		.section	.text.uart_debug_irq,"ax",%progbits
  55              		.align	1
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu fpv4-sp-d16
  61              	uart_debug_irq:
  62              	.LFB133:
  63              		.file 1 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src/uart_debug.c"
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 2


   1:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** /*----------------------------------------------------------------------------
   2:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * All rights reserved.
   4:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * are permitted provided that the following conditions are met:
   6:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * conditions and the following disclaimer.
   8:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * provided with the distribution.
  11:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * to endorse or promote products derived from this software without specific prior written
  13:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * permission.
  14:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  *---------------------------------------------------------------------------*/
  26:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** /*----------------------------------------------------------------------------
  27:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * Notice of Export Control Law
  28:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * ===============================================
  29:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  * applicable export control laws and regulations.
  33:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****  *---------------------------------------------------------------------------*/
  34:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  35:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include "usart.h"
  36:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  37:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include "stm32l4xx.h"
  38:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include <stdint.h>
  39:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include <stddef.h>
  40:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  41:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include <osal.h>
  42:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #include <link_misc.h>
  43:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  44:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  45:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #define CN_RCV_RING_BUFLEN  128
  46:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  47:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static USART_TypeDef*     s_pUSART = USART1;
  48:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static uint32_t           s_uwIRQn = USART1_IRQn;
  49:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  50:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static bool_t s_uart_init = false;
  51:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  52:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** /* USART1 init function */
  53:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** UART_HandleTypeDef uart_debug;
  54:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static tag_ring_buffer_t  s_uartdebug_rcv_ring;
  55:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static unsigned char      s_uartdebug_rcv_ringmem[CN_RCV_RING_BUFLEN];
  56:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static osal_semp_t        s_uartdebug_rcv_sync;
  57:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** static void uart_debug_irq(void)
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 3


  58:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** {
  64              		.loc 1 58 0
  65              		.cfi_startproc
  66              		@ args = 0, pretend = 0, frame = 8
  67              		@ frame_needed = 1, uses_anonymous_args = 0
  68 0000 80B5     		push	{r7, lr}
  69              	.LCFI0:
  70              		.cfi_def_cfa_offset 8
  71              		.cfi_offset 7, -8
  72              		.cfi_offset 14, -4
  73 0002 82B0     		sub	sp, sp, #8
  74              	.LCFI1:
  75              		.cfi_def_cfa_offset 16
  76 0004 00AF     		add	r7, sp, #0
  77              	.LCFI2:
  78              		.cfi_def_cfa_register 7
  59:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     unsigned char value;
  60:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     if(__HAL_UART_GET_FLAG(&uart_debug, UART_FLAG_RXNE) != RESET)
  79              		.loc 1 60 0
  80 0006 144B     		ldr	r3, .L5
  81 0008 1B68     		ldr	r3, [r3]
  82 000a DB69     		ldr	r3, [r3, #28]
  83 000c 03F02003 		and	r3, r3, #32
  84 0010 202B     		cmp	r3, #32
  85 0012 11D1     		bne	.L2
  61:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
  62:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         value = (uint8_t)(uart_debug.Instance->RDR & 0x00FF);
  86              		.loc 1 62 0
  87 0014 104B     		ldr	r3, .L5
  88 0016 1B68     		ldr	r3, [r3]
  89 0018 9B8C     		ldrh	r3, [r3, #36]	@ movhi
  90 001a 9BB2     		uxth	r3, r3
  91 001c DBB2     		uxtb	r3, r3
  92 001e FB71     		strb	r3, [r7, #7]
  63:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         ring_write(&s_uartdebug_rcv_ring,&value,1);
  93              		.loc 1 63 0
  94 0020 FB1D     		adds	r3, r7, #7
  95 0022 0122     		movs	r2, #1
  96 0024 1946     		mov	r1, r3
  97 0026 0D48     		ldr	r0, .L5+4
  98 0028 FFF7FEFF 		bl	ring_write
  64:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         osal_semp_post(s_uartdebug_rcv_sync);
  99              		.loc 1 64 0
 100 002c 0C4B     		ldr	r3, .L5+8
 101 002e 1B68     		ldr	r3, [r3]
 102 0030 1846     		mov	r0, r3
 103 0032 FFF7FEFF 		bl	osal_semp_post
  65:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }
  66:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     else if (__HAL_UART_GET_FLAG(&uart_debug,UART_FLAG_IDLE) != RESET)
  67:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
  68:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         __HAL_UART_CLEAR_IDLEFLAG(&uart_debug);
  69:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }
  70:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 104              		.loc 1 70 0
 105 0036 0AE0     		b	.L4
 106              	.L2:
  66:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 4


 107              		.loc 1 66 0
 108 0038 074B     		ldr	r3, .L5
 109 003a 1B68     		ldr	r3, [r3]
 110 003c DB69     		ldr	r3, [r3, #28]
 111 003e 03F01003 		and	r3, r3, #16
 112 0042 102B     		cmp	r3, #16
 113 0044 03D1     		bne	.L4
  68:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }
 114              		.loc 1 68 0
 115 0046 044B     		ldr	r3, .L5
 116 0048 1B68     		ldr	r3, [r3]
 117 004a 1022     		movs	r2, #16
 118 004c 1A62     		str	r2, [r3, #32]
 119              	.L4:
 120              		.loc 1 70 0
 121 004e 00BF     		nop
 122 0050 0837     		adds	r7, r7, #8
 123              	.LCFI3:
 124              		.cfi_def_cfa_offset 8
 125 0052 BD46     		mov	sp, r7
 126              	.LCFI4:
 127              		.cfi_def_cfa_register 13
 128              		@ sp needed
 129 0054 80BD     		pop	{r7, pc}
 130              	.L6:
 131 0056 00BF     		.align	2
 132              	.L5:
 133 0058 00000000 		.word	uart_debug
 134 005c 00000000 		.word	s_uartdebug_rcv_ring
 135 0060 00000000 		.word	s_uartdebug_rcv_sync
 136              		.cfi_endproc
 137              	.LFE133:
 139              		.section	.rodata
 140              		.align	2
 141              	.LC0:
 142 0000 453A2F4C 		.ascii	"E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src/u"
 142      6974654F 
 142      532F4C69 
 142      74654F53 
 142      5F4C6162 
 143 0033 6172745F 		.ascii	"art_debug.c\000"
 143      64656275 
 143      672E6300 
 144              		.section	.text.shell_uart_init,"ax",%progbits
 145              		.align	1
 146              		.global	shell_uart_init
 147              		.syntax unified
 148              		.thumb
 149              		.thumb_func
 150              		.fpu fpv4-sp-d16
 152              	shell_uart_init:
 153              	.LFB134:
  71:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** void shell_uart_init(int baud)
  72:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** {
 154              		.loc 1 72 0
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 8
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 5


 157              		@ frame_needed = 1, uses_anonymous_args = 0
 158 0000 80B5     		push	{r7, lr}
 159              	.LCFI5:
 160              		.cfi_def_cfa_offset 8
 161              		.cfi_offset 7, -8
 162              		.cfi_offset 14, -4
 163 0002 84B0     		sub	sp, sp, #16
 164              	.LCFI6:
 165              		.cfi_def_cfa_offset 24
 166 0004 02AF     		add	r7, sp, #8
 167              	.LCFI7:
 168              		.cfi_def_cfa 7, 16
 169 0006 7860     		str	r0, [r7, #4]
  73:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Instance = s_pUSART;
 170              		.loc 1 73 0
 171 0008 234B     		ldr	r3, .L9
 172 000a 1B68     		ldr	r3, [r3]
 173 000c 234A     		ldr	r2, .L9+4
 174 000e 1360     		str	r3, [r2]
  74:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.BaudRate = baud;
 175              		.loc 1 74 0
 176 0010 7B68     		ldr	r3, [r7, #4]
 177 0012 224A     		ldr	r2, .L9+4
 178 0014 5360     		str	r3, [r2, #4]
  75:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.WordLength = UART_WORDLENGTH_8B;
 179              		.loc 1 75 0
 180 0016 214B     		ldr	r3, .L9+4
 181 0018 0022     		movs	r2, #0
 182 001a 9A60     		str	r2, [r3, #8]
  76:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.StopBits = UART_STOPBITS_1;
 183              		.loc 1 76 0
 184 001c 1F4B     		ldr	r3, .L9+4
 185 001e 0022     		movs	r2, #0
 186 0020 DA60     		str	r2, [r3, #12]
  77:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.Parity = UART_PARITY_NONE;
 187              		.loc 1 77 0
 188 0022 1E4B     		ldr	r3, .L9+4
 189 0024 0022     		movs	r2, #0
 190 0026 1A61     		str	r2, [r3, #16]
  78:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.Mode = UART_MODE_TX_RX;
 191              		.loc 1 78 0
 192 0028 1C4B     		ldr	r3, .L9+4
 193 002a 0C22     		movs	r2, #12
 194 002c 5A61     		str	r2, [r3, #20]
  79:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 195              		.loc 1 79 0
 196 002e 1B4B     		ldr	r3, .L9+4
 197 0030 0022     		movs	r2, #0
 198 0032 9A61     		str	r2, [r3, #24]
  80:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     uart_debug.Init.OverSampling = UART_OVERSAMPLING_16;
 199              		.loc 1 80 0
 200 0034 194B     		ldr	r3, .L9+4
 201 0036 0022     		movs	r2, #0
 202 0038 DA61     		str	r2, [r3, #28]
  81:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     if (HAL_UART_Init(&uart_debug) != HAL_OK)
 203              		.loc 1 81 0
 204 003a 1848     		ldr	r0, .L9+4
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 6


 205 003c FFF7FEFF 		bl	HAL_UART_Init
 206 0040 0346     		mov	r3, r0
 207 0042 002B     		cmp	r3, #0
 208 0044 03D0     		beq	.L8
  82:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
  83:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         _Error_Handler(__FILE__, __LINE__);
 209              		.loc 1 83 0
 210 0046 5321     		movs	r1, #83
 211 0048 1548     		ldr	r0, .L9+8
 212 004a FFF7FEFF 		bl	_Error_Handler
 213              	.L8:
  84:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }
  85:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     LOS_HwiCreate(s_uwIRQn, 3, 0, uart_debug_irq, 0);
 214              		.loc 1 85 0
 215 004e 154B     		ldr	r3, .L9+12
 216 0050 1868     		ldr	r0, [r3]
 217 0052 0023     		movs	r3, #0
 218 0054 0093     		str	r3, [sp]
 219 0056 144B     		ldr	r3, .L9+16
 220 0058 0022     		movs	r2, #0
 221 005a 0321     		movs	r1, #3
 222 005c FFF7FEFF 		bl	LOS_HwiCreate
  86:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     //__HAL_UART_ENABLE_IT(&uart_debug, UART_IT_IDLE);
  87:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     __HAL_UART_ENABLE_IT(&uart_debug, UART_IT_RXNE);
 223              		.loc 1 87 0
 224 0060 0E4B     		ldr	r3, .L9+4
 225 0062 1B68     		ldr	r3, [r3]
 226 0064 1A68     		ldr	r2, [r3]
 227 0066 0D4B     		ldr	r3, .L9+4
 228 0068 1B68     		ldr	r3, [r3]
 229 006a 42F02002 		orr	r2, r2, #32
 230 006e 1A60     		str	r2, [r3]
  88:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     
  89:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     //create the receive buffer and receive sync
  90:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     osal_semp_create(&s_uartdebug_rcv_sync,CN_RCV_RING_BUFLEN,0);
 231              		.loc 1 90 0
 232 0070 0022     		movs	r2, #0
 233 0072 8021     		movs	r1, #128
 234 0074 0D48     		ldr	r0, .L9+20
 235 0076 FFF7FEFF 		bl	osal_semp_create
  91:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     ring_init(&s_uartdebug_rcv_ring,s_uartdebug_rcv_ringmem,CN_RCV_RING_BUFLEN,0,0);
 236              		.loc 1 91 0
 237 007a 0023     		movs	r3, #0
 238 007c 0093     		str	r3, [sp]
 239 007e 0023     		movs	r3, #0
 240 0080 8022     		movs	r2, #128
 241 0082 0B49     		ldr	r1, .L9+24
 242 0084 0B48     		ldr	r0, .L9+28
 243 0086 FFF7FEFF 		bl	ring_init
  92:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     s_uart_init = true;
 244              		.loc 1 92 0
 245 008a 0B4B     		ldr	r3, .L9+32
 246 008c 0122     		movs	r2, #1
 247 008e 1A60     		str	r2, [r3]
  93:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  94:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 248              		.loc 1 94 0
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 7


 249 0090 00BF     		nop
 250 0092 0837     		adds	r7, r7, #8
 251              	.LCFI8:
 252              		.cfi_def_cfa_offset 8
 253 0094 BD46     		mov	sp, r7
 254              	.LCFI9:
 255              		.cfi_def_cfa_register 13
 256              		@ sp needed
 257 0096 80BD     		pop	{r7, pc}
 258              	.L10:
 259              		.align	2
 260              	.L9:
 261 0098 00000000 		.word	s_pUSART
 262 009c 00000000 		.word	uart_debug
 263 00a0 00000000 		.word	.LC0
 264 00a4 00000000 		.word	s_uwIRQn
 265 00a8 00000000 		.word	uart_debug_irq
 266 00ac 00000000 		.word	s_uartdebug_rcv_sync
 267 00b0 00000000 		.word	s_uartdebug_rcv_ringmem
 268 00b4 00000000 		.word	s_uartdebug_rcv_ring
 269 00b8 00000000 		.word	s_uart_init
 270              		.cfi_endproc
 271              	.LFE134:
 273              		.section	.text._write,"ax",%progbits
 274              		.align	1
 275              		.global	_write
 276              		.syntax unified
 277              		.thumb
 278              		.thumb_func
 279              		.fpu fpv4-sp-d16
 281              	_write:
 282              	.LFB135:
  95:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  96:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
  97:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** /* define fputc */
  98:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #if defined ( __CC_ARM ) || defined ( __ICCARM__ )  /* KEIL and IAR: printf will call fputc to prin
  99:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** int fputc(int ch, FILE *f)
 100:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** {
 101:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     HAL_UART_Transmit(&uart_debug, (uint8_t *)&ch, 1, 0xFFFF);
 102:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     return ch;
 103:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 104:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** int fgetc(FILE *f){
 105:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     int ret = 0;
 106:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     unsigned char  value;
 107:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     do
 108:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
 109:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         if(osal_semp_pend(s_uartdebug_rcv_sync,LOS_WAIT_FOREVER))
 110:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         {
 111:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****             ret = ring_read(&s_uartdebug_rcv_ring,&value,1);
 112:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         }
 113:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }while(ret <=0);
 114:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     ret = value;
 115:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     return ret;
 116:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 117:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** #elif defined ( __GNUC__ )  /* GCC: printf will call _write to print */
 118:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
 119:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** 
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 8


 120:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** __attribute__((used)) int _write(int fd, char *ptr, int len)
 121:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** {
 283              		.loc 1 121 0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 16
 286              		@ frame_needed = 1, uses_anonymous_args = 0
 287 0000 80B5     		push	{r7, lr}
 288              	.LCFI10:
 289              		.cfi_def_cfa_offset 8
 290              		.cfi_offset 7, -8
 291              		.cfi_offset 14, -4
 292 0002 84B0     		sub	sp, sp, #16
 293              	.LCFI11:
 294              		.cfi_def_cfa_offset 24
 295 0004 00AF     		add	r7, sp, #0
 296              	.LCFI12:
 297              		.cfi_def_cfa_register 7
 298 0006 F860     		str	r0, [r7, #12]
 299 0008 B960     		str	r1, [r7, #8]
 300 000a 7A60     		str	r2, [r7, #4]
 122:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     if(s_uart_init)
 301              		.loc 1 122 0
 302 000c 084B     		ldr	r3, .L14
 303 000e 1B68     		ldr	r3, [r3]
 304 0010 002B     		cmp	r3, #0
 305 0012 07D0     		beq	.L12
 123:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
 124:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         HAL_UART_Transmit(&uart_debug, (uint8_t *)ptr, len, 0xFFFF);
 306              		.loc 1 124 0
 307 0014 7B68     		ldr	r3, [r7, #4]
 308 0016 9AB2     		uxth	r2, r3
 309 0018 4FF6FF73 		movw	r3, #65535
 310 001c B968     		ldr	r1, [r7, #8]
 311 001e 0548     		ldr	r0, .L14+4
 312 0020 FFF7FEFF 		bl	HAL_UART_Transmit
 313              	.L12:
 125:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }
 126:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     return len;
 314              		.loc 1 126 0
 315 0024 7B68     		ldr	r3, [r7, #4]
 127:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 316              		.loc 1 127 0
 317 0026 1846     		mov	r0, r3
 318 0028 1037     		adds	r7, r7, #16
 319              	.LCFI13:
 320              		.cfi_def_cfa_offset 8
 321 002a BD46     		mov	sp, r7
 322              	.LCFI14:
 323              		.cfi_def_cfa_register 13
 324              		@ sp needed
 325 002c 80BD     		pop	{r7, pc}
 326              	.L15:
 327 002e 00BF     		.align	2
 328              	.L14:
 329 0030 00000000 		.word	s_uart_init
 330 0034 00000000 		.word	uart_debug
 331              		.cfi_endproc
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 9


 332              	.LFE135:
 334              		.section	.text._read,"ax",%progbits
 335              		.align	1
 336              		.global	_read
 337              		.syntax unified
 338              		.thumb
 339              		.thumb_func
 340              		.fpu fpv4-sp-d16
 342              	_read:
 343              	.LFB136:
 128:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** __attribute__((used)) int _read(int fd, char *ptr, int len)
 129:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** {
 344              		.loc 1 129 0
 345              		.cfi_startproc
 346              		@ args = 0, pretend = 0, frame = 24
 347              		@ frame_needed = 1, uses_anonymous_args = 0
 348 0000 80B5     		push	{r7, lr}
 349              	.LCFI15:
 350              		.cfi_def_cfa_offset 8
 351              		.cfi_offset 7, -8
 352              		.cfi_offset 14, -4
 353 0002 86B0     		sub	sp, sp, #24
 354              	.LCFI16:
 355              		.cfi_def_cfa_offset 32
 356 0004 00AF     		add	r7, sp, #0
 357              	.LCFI17:
 358              		.cfi_def_cfa_register 7
 359 0006 F860     		str	r0, [r7, #12]
 360 0008 B960     		str	r1, [r7, #8]
 361 000a 7A60     		str	r2, [r7, #4]
 130:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     int ret = 0;
 362              		.loc 1 130 0
 363 000c 0023     		movs	r3, #0
 364 000e 7B61     		str	r3, [r7, #20]
 365              	.L18:
 131:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     unsigned char  value;
 132:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     do
 133:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     {
 134:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         if(osal_semp_pend(s_uartdebug_rcv_sync,cn_osal_timeout_forever))
 366              		.loc 1 134 0
 367 0010 0E4B     		ldr	r3, .L20
 368 0012 1B68     		ldr	r3, [r3]
 369 0014 4FF0FF31 		mov	r1, #-1
 370 0018 1846     		mov	r0, r3
 371 001a FFF7FEFF 		bl	osal_semp_pend
 372 001e 0346     		mov	r3, r0
 373 0020 002B     		cmp	r3, #0
 374 0022 07D0     		beq	.L17
 135:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         {
 136:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****             ret = ring_read(&s_uartdebug_rcv_ring,&value,1);
 375              		.loc 1 136 0
 376 0024 07F11303 		add	r3, r7, #19
 377 0028 0122     		movs	r2, #1
 378 002a 1946     		mov	r1, r3
 379 002c 0848     		ldr	r0, .L20+4
 380 002e FFF7FEFF 		bl	ring_read
 381 0032 7861     		str	r0, [r7, #20]
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 10


 382              	.L17:
 137:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****         }
 138:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     }while(ret <=0);
 383              		.loc 1 138 0
 384 0034 7B69     		ldr	r3, [r7, #20]
 385 0036 002B     		cmp	r3, #0
 386 0038 EADD     		ble	.L18
 139:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     *(unsigned char *)ptr = value;
 387              		.loc 1 139 0
 388 003a FA7C     		ldrb	r2, [r7, #19]	@ zero_extendqisi2
 389 003c BB68     		ldr	r3, [r7, #8]
 390 003e 1A70     		strb	r2, [r3]
 140:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c ****     return 1;
 391              		.loc 1 140 0
 392 0040 0123     		movs	r3, #1
 141:E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Src\uart_debug.c **** }
 393              		.loc 1 141 0
 394 0042 1846     		mov	r0, r3
 395 0044 1837     		adds	r7, r7, #24
 396              	.LCFI18:
 397              		.cfi_def_cfa_offset 8
 398 0046 BD46     		mov	sp, r7
 399              	.LCFI19:
 400              		.cfi_def_cfa_register 13
 401              		@ sp needed
 402 0048 80BD     		pop	{r7, pc}
 403              	.L21:
 404 004a 00BF     		.align	2
 405              	.L20:
 406 004c 00000000 		.word	s_uartdebug_rcv_sync
 407 0050 00000000 		.word	s_uartdebug_rcv_ring
 408              		.cfi_endproc
 409              	.LFE136:
 411              		.text
 412              	.Letext0:
 413              		.file 2 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 414              		.file 3 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 415              		.file 4 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 416              		.file 5 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 417              		.file 6 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 418              		.file 7 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_typedef.h"
 419              		.file 8 "e:\\ac6\\systemworkbench\\plugins\\fr.ac6.mcu.externaltools.arm-none.win32_1.16.0.2018071
 420              		.file 9 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/arch/arm/common/cmsis/core_cm4.h"
 421              		.file 10 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Inc/system_stm32l4xx.h"
 422              		.file 11 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Inc/stm32l431xx.h"
 423              		.file 12 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Inc/stm32l4xx.h"
 424              		.file 13 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_config.h"
 425              		.file 14 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_list.h"
 426              		.file 15 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_err.h"
 427              		.file 16 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/arch/arm/arm-m/include/los_hwi.h"
 428              		.file 17 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_tick.h"
 429              		.file 18 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_event.h"
 430              		.file 19 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/include/los_task.h"
 431              		.file 20 "E:/LiteOS/LiteOS_Lab/iot_link/os/os_imp/liteos/base/include/los_task.ph"
 432              		.file 21 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Inc/main.h"
 433              		.file 22 "E:/LiteOS/LiteOS_Lab/drivers/third_party/ST/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h
 434              		.file 23 "E:/LiteOS/LiteOS_Lab/drivers/third_party/ST/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 11


 435              		.file 24 "E:/LiteOS/LiteOS_Lab/drivers/third_party/ST/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_uart.
 436              		.file 25 "E:/LiteOS/LiteOS_Lab/targets/STM32L431_BearPi/Inc/usart.h"
 437              		.file 26 "E:/LiteOS/LiteOS_Lab/iot_link/link_misc/link_misc.h"
 438              		.file 27 "E:/LiteOS/LiteOS_Lab/iot_link/os/osal/osal_types.h"
ARM GAS  C:\Users\user\AppData\Local\Temp\ccXryOet.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 uart_debug.c
C:\Users\user\AppData\Local\Temp\ccXryOet.s:18     .data.s_pUSART:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:21     .data.s_pUSART:00000000 s_pUSART
C:\Users\user\AppData\Local\Temp\ccXryOet.s:24     .data.s_uwIRQn:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:27     .data.s_uwIRQn:00000000 s_uwIRQn
C:\Users\user\AppData\Local\Temp\ccXryOet.s:30     .bss.s_uart_init:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:33     .bss.s_uart_init:00000000 s_uart_init
                            *COM*:00000078 uart_debug
C:\Users\user\AppData\Local\Temp\ccXryOet.s:37     .bss.s_uartdebug_rcv_ring:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:40     .bss.s_uartdebug_rcv_ring:00000000 s_uartdebug_rcv_ring
C:\Users\user\AppData\Local\Temp\ccXryOet.s:43     .bss.s_uartdebug_rcv_ringmem:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:46     .bss.s_uartdebug_rcv_ringmem:00000000 s_uartdebug_rcv_ringmem
C:\Users\user\AppData\Local\Temp\ccXryOet.s:49     .bss.s_uartdebug_rcv_sync:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:52     .bss.s_uartdebug_rcv_sync:00000000 s_uartdebug_rcv_sync
C:\Users\user\AppData\Local\Temp\ccXryOet.s:55     .text.uart_debug_irq:00000000 $t
C:\Users\user\AppData\Local\Temp\ccXryOet.s:61     .text.uart_debug_irq:00000000 uart_debug_irq
C:\Users\user\AppData\Local\Temp\ccXryOet.s:133    .text.uart_debug_irq:00000058 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:140    .rodata:00000000 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:145    .text.shell_uart_init:00000000 $t
C:\Users\user\AppData\Local\Temp\ccXryOet.s:152    .text.shell_uart_init:00000000 shell_uart_init
C:\Users\user\AppData\Local\Temp\ccXryOet.s:261    .text.shell_uart_init:00000098 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:274    .text._write:00000000 $t
C:\Users\user\AppData\Local\Temp\ccXryOet.s:281    .text._write:00000000 _write
C:\Users\user\AppData\Local\Temp\ccXryOet.s:329    .text._write:00000030 $d
C:\Users\user\AppData\Local\Temp\ccXryOet.s:335    .text._read:00000000 $t
C:\Users\user\AppData\Local\Temp\ccXryOet.s:342    .text._read:00000000 _read
C:\Users\user\AppData\Local\Temp\ccXryOet.s:406    .text._read:0000004c $d

UNDEFINED SYMBOLS
ring_write
osal_semp_post
HAL_UART_Init
_Error_Handler
LOS_HwiCreate
osal_semp_create
ring_init
HAL_UART_Transmit
osal_semp_pend
ring_read
